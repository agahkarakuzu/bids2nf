# Supported BIDS suffixes

This page documents the BIDS suffixes currently supported by bids2nf.

## Named Sets

Named sets define specific collections of files with predefined names and properties.

::::{card}
:header: <span class="custom-heading"><h4>MTS</h4></span>
:footer: **Required keys:** `T1w`, `MTw`, `PDw`

**Magnetization transfer saturation**

This method is to calculate a semi-quantitative magnetization transfer
saturation index map.
The MTS method involves three sets of anatomical images that differ in terms
of application of a magnetization transfer RF pulse (MTon or MToff) and flip
angle ([Helms et al. 2008](https://doi.org/10.1002/mrm.21732)).


| Key | Description | Entity-based mapping |
|------|-------------|------------|
| T1w | T1-weighted image assuming flip-02 is the larger flip angle | flip: flip-02, mtransfer: mt-off |
| MTw | Magnetization transfer weighted image of the PD pair. | flip: flip-01, mtransfer: mt-on |
| PDw | Proton density weighted image assuming flip-01 is the lower flip angle | flip: flip-01, mtransfer: mt-off |

:::{seealso} Example usage within a process
:class: dropdown
```groovy
  bids_channel['MTS']['T1w']['nii']
  bids_channel['MTS']['T1w']['json']
  bids_channel['MTS']['MTw']['nii']
  bids_channel['MTS']['MTw']['json']
  bids_channel['MTS']['PDw']['nii']
  bids_channel['MTS']['PDw']['json']
```
:::
{button}`Nextflow process template <https://github.com/agahkarakuzu/bids2nf/blob/main/modules/templates/mts_process_template.nf>`
::::

::::{card}
:header: <span class="custom-heading"><h4>TB1TFL</h4></span>
:footer: **Required keys:** `anat`, `famp`


The result of a Siemens `tfl_b1_map` product sequence.
This sequence produces two images.
The first image appears like an anatomical image and the second output is a
scaled flip angle map.


| Key | Description | Entity-based mapping |
|------|-------------|------------|
| anat | Anatomical-like image generated by the tfl_b1_map product sequence | acquisition: acq-anat |
| famp | scaled flip angle map | acquisition: acq-famp |

:::{seealso} Example usage within a process
:class: dropdown
```groovy
  bids_channel['TB1TFL']['anat']['nii']
  bids_channel['TB1TFL']['anat']['json']
  bids_channel['TB1TFL']['famp']['nii']
  bids_channel['TB1TFL']['famp']['json']
```
:::
::::

::::{card}
:header: <span class="custom-heading"><h4>RB1COR</h4></span>
:footer: **Required keys:** `bodyMTw`, `bodyT1w`, `bodyPDw`, `headMTw`, `headT1w`, `headPDw`


Low resolution images acquired by the body coil
(in the gantry of the scanner) and the head coil using identical acquisition
parameters to generate a combined sensitivity map as described in
[Papp et al. (2016)](https://doi.org/10.1002/mrm.26058).


| Key | Description | Entity-based mapping |
|------|-------------|------------|
| bodyMTw | MTw B1- field from the body coil | acquisition: acq-bodyMTw |
| bodyT1w | T1w B1- field from the body coil | acquisition: acq-bodyT1w |
| bodyPDw | PDw B1- field from the body coil | acquisition: acq-bodyPDw |
| headMTw | MTw B1- field from the head coil | acquisition: acq-headMTw |
| headT1w | T1w B1- field from the head coil | acquisition: acq-headT1w |
| headPDw | PDw B1- field from the head coil | acquisition: acq-headPDw |

:::{seealso} Example usage within a process
:class: dropdown
```groovy
  bids_channel['RB1COR']['bodyMTw']['nii']
  bids_channel['RB1COR']['bodyMTw']['json']
  bids_channel['RB1COR']['bodyT1w']['nii']
  bids_channel['RB1COR']['bodyT1w']['json']
  bids_channel['RB1COR']['bodyPDw']['nii']
  bids_channel['RB1COR']['bodyPDw']['json']
  bids_channel['RB1COR']['headMTw']['nii']
  bids_channel['RB1COR']['headMTw']['json']
  bids_channel['RB1COR']['headT1w']['nii']
  bids_channel['RB1COR']['headT1w']['json']
  bids_channel['RB1COR']['headPDw']['nii']
  bids_channel['RB1COR']['headPDw']['json']
```
:::
::::

## Sequential Sets

Sequential sets define collections of files organized by BIDS entities.

::::{card}
:header: <span class="custom-heading-2"><h4>VFA</h4></span>
:footer: **Entity: `flip`**

**Variable flip angle**

The VFA method involves at least two spoiled gradient echo (SPGR) of
steady-state free precession (SSFP) images acquired at different flip angles.
Depending on the provided metadata fields and the sequence type,
data may be eligible for DESPOT1, DESPOT2 and their variants
([Deoni et al. 2005](https://doi.org/10.1002/mrm.20314)).



:::{seealso} Example usage within a process
:class: dropdown
```groovy
  // Get number of items in sequential set
  bids_channel['VFA']['nii'].size()
  // Access first item
  bids_channel['VFA']['nii'][0]
  bids_channel['VFA']['json'][0]
```
:::
{button}`Process template <https://github.com/agahkarakuzu/bids2nf/blob/main/modules/templates/vfa_process_template.nf>`
::::

::::{card}
:header: <span class="custom-heading-2"><h4>IRT1</h4></span>
:footer: **Entity: `inversion`**

**Inversion recovery T1 mapping**

The IRT1 method involves multiple inversion recovery spin-echo images
acquired at different inversion times
([Barral et al. 2010](https://doi.org/10.1002/mrm.22497)).



:::{seealso} Example usage within a process
:class: dropdown
```groovy
  // Get number of items in sequential set
  bids_channel['IRT1']['nii'].size()
  // Access first item
  bids_channel['IRT1']['nii'][0]
  bids_channel['IRT1']['json'][0]
```
:::
::::

::::{card}
:header: <span class="custom-heading-2"><h4>TB1DAM</h4></span>
:footer: **Entity: `flip`**


The double-angle B1<sup>+</sup> method
([Insko and Bolinger 1993](https://doi.org/10.1006/jmra.1993.1133)) is based
on the calculation of the actual angles from signal ratios,
collected by two acquisitions at different nominal excitation flip angles.
Common sequence types for this application include spin echo and echo planar
imaging.



:::{seealso} Example usage within a process
:class: dropdown
```groovy
  // Get number of items in sequential set
  bids_channel['TB1DAM']['nii'].size()
  // Access first item
  bids_channel['TB1DAM']['nii'][0]
  bids_channel['TB1DAM']['json'][0]
```
:::
::::

::::{card}
:header: <span class="custom-heading-2"><h4>MEGRE</h4></span>
:footer: **Entity: `echo`**

**Multi-echo Gradient Recalled Echo**

Anatomical gradient echo images acquired at different echo times.
Please note that this suffix is not intended for the logical grouping of
images acquired using an Echo Planar Imaging (EPI) readout.



:::{seealso} Example usage within a process
:class: dropdown
```groovy
  // Get number of items in sequential set
  bids_channel['MEGRE']['nii'].size()
  // Access first item
  bids_channel['MEGRE']['nii'][0]
  bids_channel['MEGRE']['json'][0]
```
:::
::::

::::{card}
:header: <span class="custom-heading-2"><h4>MESE</h4></span>
:footer: **Entity: `echo`**

**Multi-echo Spin Echo**

The MESE method involves multiple spin echo images acquired at different echo
times and is primarily used for T2 mapping.
Please note that this suffix is not intended for the logical grouping of
images acquired using an Echo Planar Imaging (EPI) readout.



:::{seealso} Example usage within a process
:class: dropdown
```groovy
  // Get number of items in sequential set
  bids_channel['MESE']['nii'].size()
  // Access first item
  bids_channel['MESE']['nii'][0]
  bids_channel['MESE']['json'][0]
```
:::
::::

::::{card}
:header: <span class="custom-heading-2"><h4>TB1SRGE</h4></span>
:footer: **Entities: `flip`, `inversion` (hierarchical order)**


Saturation-prepared with 2 rapid gradient echoes (SA2RAGE) uses a ratio of
two saturation recovery images with different time delays,
and a simulated look-up table to estimate B1+
([Eggenschwiler et al. 2011](https://doi.org/10.1002/mrm.23145)).
This sequence can also be used in conjunction with MP2RAGE T1 mapping to
iteratively improve B1+ and T1 map estimation
([Marques & Gruetter 2013](https://doi.org/10.1371/journal.pone.0069294)).



:::{seealso} Example usage within a process
:class: dropdown
```groovy
  // Multiple entities organized by: flip, inversion
  // First dimension: flip, Second dimension: inversion
  // Get size of first dimension (flip)
  bids_channel['TB1SRGE']['nii'].size()
  // Get size of second dimension (inversion) for first flip
  bids_channel['TB1SRGE']['nii'][0].size()
  // Access first item
  bids_channel['TB1SRGE']['nii'][0][0]
  bids_channel['TB1SRGE']['json'][0][0]
```
:::
::::

::::{card}
:header: <span class="custom-heading-2"><h4>TB1EPI</h4></span>
:footer: **Entities: `echo`, `flip` (hierarchical order)**


This B1<sup>+</sup> mapping method
([Jiru and Klose 2006](https://doi.org/10.1002/mrm.21083)) is based on two
EPI readouts to acquire spin echo (SE) and stimulated echo (STE) images at
multiple flip angles in one sequence, used in the calculation of deviations
from the nominal flip angle.



:::{seealso} Example usage within a process
:class: dropdown
```groovy
  // Multiple entities organized by: echo, flip
  // First dimension: echo, Second dimension: flip
  // Get size of first dimension (echo)
  bids_channel['TB1EPI']['nii'].size()
  // Get size of second dimension (flip) for first echo
  bids_channel['TB1EPI']['nii'][0].size()
  // Access first item
  bids_channel['TB1EPI']['nii'][0][0]
  bids_channel['TB1EPI']['json'][0][0]
```
:::
::::

---

*This documentation is automatically generated from `bids2nf.yaml`.*