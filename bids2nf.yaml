# https://bids-specification.readthedocs.io/en/stable/common-principles.html#entity-linked-file-collections
# Entity based grouping is for entity linked file collections.

MTS:
  example_output: "tests/expected_outputs/ds-mtsat/sub-phantom_ses-rth750rev_run-01_unified.json"
  named_set:
    T1w:
      description: "T1-weighted image assuming flip-02 is the larger flip angle"
      flip: "flip-02"
      mtransfer: "mt-off"
    MTw:
      description: "Magnetization transfer weighted image of the PD pair."
      flip: "flip-01"
      mtransfer: "mt-on"
    PDw:
      description: "Proton density weighted image assuming flip-01 is the lower flip angle"
      flip: "flip-01"
      mtransfer: "mt-off"
  required: ["T1w", "MTw", "PDw"]

TB1TFL:
  example_output: "tests/expected_outputs/qmri_tb1tfl/sub-01_null_null_unified.json"
  named_set:
    anat:
      description: "Anatomical-like image generated by the tfl_b1_map product sequence"
      acquisition: "acq-anat"
    famp:
      description: "scaled flip angle map"
      acquisition: "acq-famp"
  required: ["anat", "famp"]

TB1AFI:
  example_output: "tests/expected_outputs/qmri_vfa/sub-01_null_null_unified.json"
  named_set:
    tr1:
      description: "Image from the first interleaved TR of the AFI sequence"
      acquisition: "acq-tr1"
    tr2:
      description: "Image from the second interleaved TR of the AFI sequence"
      acquisition: "acq-tr2"
  required: ["tr1", "tr2"]

RB1COR:
  example_output: "tests/expected_outputs/qmri_mpm/sub-01_null_null_unified.json"
  named_set:
    bodyMTw:
      description: "MTw B1- field from the body coil"
      acquisition: "acq-bodyMTw"
    bodyT1w:
      description: "T1w B1- field from the body coil"
      acquisition: "acq-bodyT1w"
    bodyPDw:
      description: "PDw B1- field from the body coil"
      acquisition: "acq-bodyPDw"
    headMTw:
      description: "MTw B1- field from the head coil"
      acquisition: "acq-headMTw"
    headT1w:
      description: "T1w B1- field from the head coil"
      acquisition: "acq-headT1w"
    headPDw:
      description: "PDw B1- field from the head coil"
      acquisition: "acq-headPDw"
  required: ["bodyMTw", "bodyT1w", "bodyPDw", "headMTw", "headT1w", "headPDw"]

# Single entity sequential sets
VFA:
  example_output: "tests/expected_outputs/qmri_vfa/sub-01_null_null_unified.json"
  sequential_set:
    by_entity: flip

IRT1:
  example_output: "tests/expected_outputs/qmri_irt1/sub-01_null_null_unified.json"
  sequential_set:
    by_entity: inversion

TB1DAM:
  example_output: "tests/expected_outputs/qmri_mtsat/sub-01_null_null_unified.json"
  sequential_set:
    by_entity: flip

MEGRE:
  example_output: "tests/expected_outputs/qmri_megre/sub-01_null_null_unified.json"
  sequential_set:
    by_entity: echo

MESE:
  example_output: "tests/expected_outputs/qmri_mese/sub-01_null_null_unified.json"
  sequential_set:
    by_entity: echo

TB1SRGE:
  example_output: "tests/expected_outputs/qmri_sa2rage/sub-01_null_null_unified.json"
  sequential_set:
    by_entities: [flip,inversion]
    order: hierarchical

TB1EPI:
  example_output: "tests/expected_outputs/qmri_mpm/sub-01_null_null_unified.json"
  sequential_set:
    by_entities: [echo,flip]
    order: hierarchical

# Mixed sets (combines named and sequential grouping)
MPM:
  example_output: "tests/expected_outputs/qmri_mpm/sub-01_null_null_unified.json"
  mixed_set:
    named_dimension: "acquisition"
    sequential_dimension: "echo"
    named_groups:
      MTw:
        description: "Magnetization transfer weighted images"
        acquisition: "acq-MTw"
        flip: "flip-1"
        mtransfer: "mt-on"
      PDw:
        description: "Proton density weighted images"
        acquisition: "acq-PDw"
        flip: "flip-1" 
        mtransfer: "mt-off"
      T1w:
        description: "T1-weighted images"
        acquisition: "acq-T1w"
        flip: "flip-2"
        mtransfer: "mt-off"
    required: ["MTw", "PDw", "T1w"]